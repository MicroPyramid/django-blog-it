{% extends 'base.html' %}
    {% block title %} - Add Category{% endblock %}
    {% block content %}
        <div class="container">
            <div class="row">
                <h1 id="page_title"></h1>
            </div>
            <!-- end class of row -->
            <div class="row">
                <form action="" id="post-form" enctype="multipart/form-data" method="post">
                    {% csrf_token %}
                    <div class="form-group">
                      <span class='control_label'>Name:</span>
                      <div class="form_control">
                        <input id="name" class="form-control" type="text" maxlength="20" name="name" value="{{ category_name.name }}">
                      </div>
                    </div>

                    <div class="form-group">
                      <span class='control_label'>Description:</span>
                      <div class="form_control">
                        <input id="description" class="form-control" type="text" maxlength="500" name="description" value="{{ category_name.description }}">
                      </div>
                    </div>

                    <div class="checkbox">
                      <span class='control_label'>Is active:</span>
                      <div class="form_control">
                          <label>
                            <input id="is_active" type="checkbox" name="is_active" {% if category_name.is_active %}checked{% endif %}>
                          </label>
                      </div>
                    </div>

                    <div class="form-group">
                        <button class="btn btn-primary" type="submit">Submit</button>
                    </div>
                </form>
            </div>
            <!-- end div row of form -->
        </div>
        <!-- end div container -->
    {% endblock %}
    {% block js_script %}
    <script type="text/javascript">
        $('#post-form').submit(function(event){
            event.preventDefault();
            $.post("",$('#post-form').serialize(), function(data){
                if(data.error){
                    $('p.error_required').remove();
                    for (var key in data.response) {
                        $('#' + key).after('<p class="error_required">' + data.response[key] + '</p>');
                    }
                }else{
                    alert(data['response']);
                    window.location='/blog/category/';
                }
            }, 'json');
        });
    </script>
    <script type="text/javascript">
        console.log(window.location.pathname);
        if(window.location.pathname == '/blog/add_category/'){
            $('#page_title').text('Add Category');
        }
        else {
            $('#page_title').text('Edit Category');
        }

    </script>
    {% endblock %}